# Plausible Analytics Environment Variables
# Copy this file to .env and fill in your actual values for your Dokploy deployment
#

## ============================================================================
## REQUIRED CONFIGURATION ENVIRONEMENT
## ============================================================================

# Domain where Plausible will be accessible
# Must be a valid domain (e.g., analytics.example.com)
BASE_URL=https://analytics.example.com

# Secret key for encryption (generate with: openssl rand -base64 48)
SECRET_KEY_BASE=your-secret-key-base-here

# TOTP vault key for 2FA (generate with: openssl rand -base64 24)
TOTP_VAULT_KEY=your-totp-vault-key-here

## ============================================================================
## REGISTRATION & SECURITY
## ============================================================================

# Disable user registration (set to "true" to prevent new signups)
# DISABLE_REGISTRATION=false

# Enable email verification for new accounts
# ENABLE_EMAIL_VERIFICATION=true

## ============================================================================
## EMAIL CONFIGURATION
## ============================================================================

# Email address to use for system notifications
MAILER_EMAIL=noreply@analytics.example.com

# SMTP Configuration (standard email provider)
SMTP_HOST_ADDR=smtp.example.com
SMTP_HOST_PORT=587
SMTP_USER_NAME=your-email@example.com
SMTP_USER_PWD=your-smtp-password
SMTP_HOST_SSL_ENABLED=true

# Alternative: Postmark
# POSTMARK_API_KEY=your-postmark-token

# Alternative: Mailgun
# MAILGUN_API_KEY=your-mailgun-api-key
# MAILGUN_DOMAIN=mg.example.com

# Alternative: Sendgrid
# SENDGRID_API_KEY=your-sendgrid-api-key

# Alternative: Mandrill
# MANDRILL_API_KEY=your-mandrill-api-key

## ============================================================================
## GOOGLE AUTHENTICATION & ANALYTICS
## ============================================================================

# Please follow the guide within the Plausible documentation to set up Google OAuth:
# https://plausible.io/docs/google-search-console-integration

# Google OAuth (sign in with Google)
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret

# Google Analytics import (optional)
# GOOGLE_ANALYTICS_IMPORT_API_KEY=your-api-key

## ============================================================================
## GEOLOCATION
## ============================================================================

# MaxMind GeoIP database for geolocation (optional)
# MAXMIND_LICENSE_KEY=your-maxmind-license-key
# IP_GEOLOCATION_DB=/var/lib/plausible/maxmind/GeoLite2-City.mmdb

## ============================================================================
## PERFORMANCE OPTIMIZATION
## ============================================================================

# Erlang VM flags for CPU optimization (optional)
# Disables busy-waiting to reduce idle CPU usage from 5-10% to <1%
# Recommended for resource-constrained environments
ERL_FLAGS="+sbwt none +sbwtdcpu none +sbwtdio none"

## ============================================================================
## ADVANCED (Usually auto-configured in docker-compose.yml)
## ============================================================================

# Database URLs (configured via docker-compose.yml)
# DATABASE_URL=postgresql://postgres:postgres@plausible_db:5432/plausible
# CLICKHOUSE_DATABASE_URL=http://default:@plausible_events_db:8123/events

# Ports (for standalone deployment with Let's Encrypt)
# HTTP_PORT=80
# HTTPS_PORT=443
